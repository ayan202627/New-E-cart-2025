<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
	integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/style.css">
    

</head>
<body>
    <nav class="navbar navbar-expand-lg  bg-primary fixed-top navbar-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="index.html"><i
				class="fa-solid fa-cart-shopping"></i> 22yards</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="index.html"><i class="fa-solid fa-house"></i>
							Home</a></li>
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="product.html">Products</a></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" href="#" role="button"
						data-bs-toggle="dropdown" aria-expanded="false"> Category </a>
						<ul class="dropdown-menu">
							<li><a class="dropdown-item" href="Viewall.html">View All Categories</a></li>
						</ul></li>
				</ul>
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="login.html"><i
							class="fa-solid fa-right-to-bracket"></i>ADMIN LOGIN</a></li>
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="register.html">ADMIN REGISTER</a></li>

					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="#">USER LOGIN</a></li>
						<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="#">USER REGISTER</a></li>

				</ul>
			</div>
		</div>
	</nav>
   
    <form onsubmit="logicCheck(event)" id="loginform">
        <div style="padding-top: 5%">
        Login ID <input type="text" name="loginid"/>
        <br/>
        Password <input type="password" name="password"/>
        <br/>
        <input type="submit" value="Login"/>
    </form>
    <form onsubmit="saveProduct(event)" id="productform">
    Product id <input type="text" name="productId"/>
    <br/> Name <input type="text" name="productName"/>
    <br/>Image url <input type="text" name="productImageUrl"/>
    <br/>Price <input type="number" name="price"/>
    <br/>
    <input type="submit" value="Save"/>
    </div>
    </form>
    </div>

    <div id="container" style="display:flex; flex-wrap:wrap">


    </div>
    <script>
        document.getElementById('productform').style.display="none";

        let loginCheck=(e)=>{
            e.preventDefault();
             let formData = new FormData(e.target);
            let data  = Object.fromEntries(formData);
            if(data.loginid=="admin" && data.password=="12345"){
                alert("login success");
                document.getElementById('loginform').style.display="none";
                document.getElementById('productform').style.display="block";
            }
        }
        let productData=[];

        let renderData=()=>{
            document.getElementById('container').innerText=productData;
        }
        let getData=()=>{
            axios.get("http://localhost:8080/product-app/products")
            .then(rep=>{
                productData=resp.data;
                renderData();
            })
            .catch()
        }
       let saveProduct=(e)=>{
            e.preventDefault();
            let formData = new FormData(e.target);
            let data  = Object.fromEntries(formData);
            console.log(data);
            axios.post("http://localhost:8080/product-app/addProduct",data)
            .then(resp=>{
                alert('record added');
                getData();
            })
            .catch(er=>{
                alert(er);
            })

        }
        getData();

    </script>
</body>
</html>